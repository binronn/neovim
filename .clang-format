# =================================================================
# 已根据您的需求为现代 clang-format 版本修正
# =================================================================
---
Language:        Cpp
BasedOnStyle:    LLVM

# 模板参数列表换行
AlwaysBreakTemplateDeclarations: true

# 大括号与语句不在同一行
BreakBeforeBraces: Allman

# 使用 Tab 进行缩进，Tab 大小为 4
UseTab: Never
TabWidth: 4
IndentWidth: 4

# 控制大括号换行
BraceWrapping:
  AfterCaseLabel: false
  AfterClass: true
  AfterControlStatement: true
  AfterEnum: true
  AfterFunction: true
  AfterNamespace: true
  AfterStruct: true
  AfterUnion: true
  AfterExternBlock: true
  BeforeCatch: true
  BeforeElse: true
  IndentBraces: false
  SplitEmptyFunction: true
  SplitEmptyRecord: true
  SplitEmptyNamespace: true

# 括号与语句中包含空格
SpacesInParentheses: true
SpacesInSquareBrackets: true
SpacesInAngles: true
SpaceAfterCStyleCast: true
SpaceBeforeParens: ControlStatements
SpaceInEmptyParentheses: false

# 宽松的代码风格
AllowShortBlocksOnASingleLine: false
AllowShortCaseLabelsOnASingleLine: false
AllowShortFunctionsOnASingleLine: None
AllowShortIfStatementsOnASingleLine: false
AllowShortLoopsOnASingleLine: false

# 控制访问修饰符缩进
# AccessModifierOffset: -2

# 换行规则
ColumnLimit: 130
MaxEmptyLinesToKeep: 2
KeepEmptyLinesAtTheStartOfBlocks: true

# 空格规则
SpaceBeforeAssignmentOperators: true
SpaceBeforeCpp11BracedList: true
SpaceBeforeRangeBasedForLoopColon: true
SpaceInEmptyBlock: true

# 对齐规则
AlignAfterOpenBracket: Align
AlignConsecutiveAssignments: true
AlignConsecutiveDeclarations: true
AlignEscapedNewlines: Right
AlignOperands: AlignAfterOperator # [修正] 'AlignOperands: true' 已废弃
AlignTrailingComments: true

# 命名空间缩进
NamespaceIndentation: All

# 其他
PointerAlignment: Left
SortUsingDeclarations: true

# [修正] 'SortIncludes: true' 已废弃, 使用 IncludeCategories 进行更精细的控制
IncludeCategories:
  - Regex:           '^<.*'
    Priority:        1
  - Regex:           '^".*"'
    Priority:        2
SortIncludes:      CaseInsensitive
...
